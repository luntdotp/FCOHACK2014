<html>
  <head>
  	<link rel="stylesheet" type="text/css" href="tinata.css">
    <link rel="stylesheet" href="http:////code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css">
    <script src="http:////code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src='http:////code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js'></script>
  </head>
  <body>
    <div data-role='page'>
      <div data-role='header'>
        <div class='ui-grid-a'>
          <div class='ui-block-a'>
            <a data-role='button'>Tinata</a>
            <a data-role='button'>Country Name - </a>
          </div>
          <div class='ui-block-b'>
            <form>
              <input id="pre-rendered-filterable" data-type="search">
            </form>
            <div
              class="ui-controlgroup ui-controlgroup-vertical ui-corner-all"
              data-role="controlgroup"
              data-filter="true"
              data-input="#pre-rendered-filterable"
              data-filter-reveal="true"
              data-enhanced="true">
              <div class="ui-controlgroup-controls" id='options'>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='content' data-role='content'>
        
        <div data-role="controlgroup">
          <a class="ui-btn ui-corner-all">Country Name: <span id='countryName'></span></a>
          <a class="ui-btn ui-corner-all">Demonym: <span id='demonym'></span></a>
        </div>
        
        <div data-role="collapsible-set">
          
          <div data-role="collapsible" data-collapsed="false">
            <h3>Information</h3>
            <p>
              <strong>Drug Arrests: </strong><span id='drugArrests'></span><br />
              <strong>Hospitalisations: </strong><span id='hospitalisations'></span><br />
              <strong>Number of visiters (2012): </strong><span id='novisiters2012'></span><br />
              <strong>Lost/Stolen Passports: </strong><span id='passportloss'></span><br />
              <strong>Total Assistance Requests (Consulate): </strong><span id='totalAssistance'></span><br />
              <strong>Cases of Rape: </strong><span id='rape'></span><br />
              <strong>Cases of Sexual Assault: </strong><span id='sexualAssault'></span><br />
              <strong>Total Death: </strong><span id='totalDeaths'></span><br />
            </p>
          </div>
          
          <div data-role="collapsible">
            <h3>Warnings</h3>
            <p><span id="warnings">No warnings found.<span></p>
          </div>
          
        </div>
      </div>
    </div>
  </body>
  <script>
    var data = [
      {
        'countryName': 'Spain',
        'demonym': 0,
        'drugArrests': '10 Low',
        'totalArrests': 0,
        'totalDeaths': 0,
        'hospitalisations': 0,
        'rape': 0,
        'sexualAssault': 0,
        'therAssistance': 0,
        'totalAssistance': 0,
        'passportloss': 0,
        'novisiters2012': 0,
        'warnings': [],
        'healthAdvice': '',
        
        'percentages': {
          'drugArrests':10,
          'totalArrests':10,
          'deaths':10,
          'hospitalisation':10,
          'rape':10,
          'sexualAssault':10,
          'otherAssistance':40
        }
      },
      
      {
        'countryName': 'Spain',
        'demonym': 0,
        'drugArrests': '10 Low',
        'totalArrests': 0,
        'totalDeaths': 0,
        'hospitalisations': 0,
        'rape': 0,
        'sexualAssault': 0,
        'therAssistance': 0,
        'totalAssistance': 0,
        'passportloss': 0,
        'novisiters2012': 0,
        'warnings': [],
        'healthAdvice': '',
        
        'percentages': {
          'drugArrests':10,
          'totalArrests':10,
          'deaths':10,
          'hospitalisation':10,
          'rape':10,
          'sexualAssault':10,
          'otherAssistance':40
        }
      }
      
      
    ]
	
    $(data).map(function(index){$('<a>').addClass('ui-screen-hidden country').appendTo($('#options')).text(this.countryName).attr({'data-role':'button','index':index}).click(function(){
      
      console.log(data[$(this).attr('index')]);
      $('#countryName').text(data[$(this).attr('index')].countryName);
      $('#demonym').text(data[$(this).attr('index')].demonym);
      $('#drugArrests').text(data[$(this).attr('index')].drugArrests);
      $('#hospitalisations').text(data[$(this).attr('index')].hospitalisations);
      $('#passportloss').text(data[$(this).attr('index')].passportloss);
      $('#totalAssistance').text(data[$(this).attr('index')].totalAssistance);
      $('#rape').text(data[$(this).attr('index')].rape);
      $('#sexualAssault').text(data[$(this).attr('index')].sexualAssault);
      $('#totalDeaths').text(data[$(this).attr('index')].totalDeaths);
      $('#novisiters2012').text(data[$(this).attr('index')].novisiters2012);
	  
	var warningsLength = data[$(this).attr('index')].warnings.length;
	if(warningsLength > 0) {
		var warnings = "Current warnings: ";
		for (var i = 0; i < warningsLength; i++) {
			warnings += "'" + data[$(this).attr('index')].warnings[i] + "' ";
		} 
		$('#warnings').text(warnings);	  
	}
	  
    })});
    
    //$('#input').focusout(function(){$('#options').hide()});
    //$('#input').focusin(function(){$('#options').show()});
  </script>
</html>

